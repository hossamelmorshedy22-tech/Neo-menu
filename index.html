<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>نيو كافية منيو - NEO CAFE'</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --neo-beige:#f6efe6;
    --neo-olive:#2f5d3a;
    --neo-olive-2:#3f6f45;
    --muted:#6b6b6b;
    --card:#ffffff;
    --shadow:0 10px 30px rgba(0,0,0,0.08);
    --radius:14px;
  }

  *{box-sizing:border-box}
  html,body{
    margin:0;
    font-family:"Cairo","Poppins",sans-serif;
    direction:rtl;
    background:var(--neo-beige);
    color:#111;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  a{color:inherit;text-decoration:none}

  /* HEADER */
  .header{ position:relative; padding:26px 16px 12px; text-align:center; }
  .logo{ position:absolute; top:10px; right:10px; width:90px; height:auto; object-fit:contain; background:transparent; padding:0; border-radius:0; box-shadow:none; transition:transform .25s ease; }
  .logo:hover{ transform:translateY(-4px); }
  @media(max-width:700px){ .logo{ width:64px; top:6px; right:6px } }
  .title{ margin:0; font-size:24px; font-weight:700; color:var(--neo-olive); }
  .neo-tag{ margin-top:6px; font-size:14px; color:var(--neo-olive-2); font-weight:600; font-family:"Poppins",sans-serif; }
  .subtitle{ margin-top:6px; font-size:13px; color:var(--muted); }

  /* TABS */
  .tabs-wrap{ position:relative; display:flex; justify-content:center; margin:12px 0 20px }
  .tabs{ display:flex; gap:10px; flex-wrap:wrap; z-index:2 }
  .tab{ background:#fff; padding:8px 14px; border-radius:999px; border:1px solid #eee; font-weight:700; color:var(--muted); cursor:pointer; transition: transform .15s ease, box-shadow .15s ease, background .15s ease; }
  .tab:hover{ transform: translateY(-6px) scale(1.02); box-shadow:0 10px 26px rgba(47,93,58,0.06); background: linear-gradient(180deg,#f8fbf8,#fff); }
  .tab.active{ background:var(--neo-olive); color:#fff; box-shadow:0 14px 40px rgba(47,93,58,0.14); transform:none; }
  .tabs-underline{ position:absolute; height:4px; border-radius:999px; background:linear-gradient(90deg,var(--neo-olive),var(--neo-olive-2)); bottom: -6px; right: 50%; transform: translateX(50%); transition: all .28s cubic-bezier(.2,.9,.2,1); z-index:1; width:0; opacity:0; }

  /* LAYOUT & GRID */
  .container{ max-width:1100px; margin:0 auto; padding:0 12px 110px; }
  .section-title{ font-size:19px; font-weight:700; color:var(--neo-olive-2); margin-bottom:10px; }
  .grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:14px; }
  @media(max-width:820px){ .grid{ grid-template-columns:1fr } }

  /* PRODUCT CARD + animation */
  .card{ background:#ffffffcc; border-radius:var(--radius); padding:12px; display:flex; gap:12px; align-items:center; box-shadow:var(--shadow); opacity:0; transform: translateY(12px) scale(.997); animation: fadeUp .42s cubic-bezier(.2,.85,.25,1) forwards; }
  @keyframes fadeUp{ from{ opacity:0; transform: translateY(12px) scale(.997) } to{ opacity:1; transform: translateY(0) scale(1) } }
  .thumb{ width:110px; height:82px; object-fit:cover; border-radius:10px; background:#eee; transition:transform .25s ease }
  .card:hover .thumb{ transform:scale(1.03) }
  .meta{ flex:1; min-width:0 }
  .meta h3{ margin:0; font-size:16px; font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .meta p{ margin:6px 0 0; font-size:13px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .meta .price{ margin-top:8px; font-weight:800; color:var(--neo-olive); }
  .actions{ display:flex; flex-direction:column; gap:8px; align-items:flex-end; min-width:92px }
  .btn{ padding:8px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:700; font-size:13px; }
  .btn-outline{ background:#fff; border:1px solid #ddd; color:#444; }
  .btn-primary{ background:var(--neo-olive); color:#fff; box-shadow:0 8px 20px rgba(47,93,58,0.12); }
  .btn-primary:hover{ transform:translateY(-3px); }

  /* CART AREA - more visible */
  .cart-float{ position:fixed; right:18px; bottom:18px; display:flex; align-items:center; gap:10px; z-index:99999; pointer-events:auto; }
  .cart-btn{ width:74px; height:74px; border-radius:16px; background:linear-gradient(180deg,var(--neo-olive),var(--neo-olive-2)); display:flex; align-items:center; justify-content:center; box-shadow:0 26px 60px rgba(47,93,58,0.2); cursor:pointer; transition:transform .18s ease, box-shadow .18s ease; position:relative; }
  .cart-btn:hover{ transform:translateY(-6px); box-shadow:0 36px 80px rgba(47,93,58,0.26); }
  .cart-badge{ position:absolute; top:-8px; left:-8px; min-width:26px; height:26px; line-height:26px; border-radius:999px; background:#ffeb3b; color:#111; font-weight:900; text-align:center; font-size:13px; box-shadow:0 8px 20px rgba(0,0,0,0.15); display:none; }
  .pulse-ring{ position:absolute; width:94px; height:94px; border-radius:20px; right:-10px; bottom:-10px; z-index:-1; background: radial-gradient(circle at center, rgba(63,111,69,0.18) 0%, rgba(63,111,69,0.05) 30%, rgba(63,111,69,0) 60%); opacity:0; transform:scale(.9); transition:opacity .18s ease, transform .35s cubic-bezier(.2,.85,.25,1); pointer-events:none; }
  .pulse-ring.show{ opacity:1; transform:scale(1.05); animation: pulse 900ms ease-out; }
  @keyframes pulse{ 0%{ transform:scale(.95); opacity:.9 } 70%{ transform:scale(1.12); opacity:.35 } 100%{ transform:scale(1.3); opacity:0 } }
  .cart-pill{ background:linear-gradient(90deg,var(--neo-olive),var(--neo-olive-2)); color:#fff; padding:10px 14px; border-radius:999px; font-weight:800; box-shadow:0 18px 40px rgba(47,93,58,0.18); display:flex; gap:10px; align-items:center; cursor:pointer; transform-origin:right bottom; transition: transform .16s ease; }
  .cart-pill:hover{ transform:translateY(-4px); }
  .pill-total{ font-weight:900; font-size:15px; background:rgba(255,255,255,0.12); padding:6px 8px; border-radius:8px; }
  @media(max-width:520px){ .cart-pill{ padding:12px 16px; font-size:15px } .cart-btn{ width:64px; height:64px } }
  .cart-tooltip{ position:absolute; bottom:86px; right:0; background:#111; color:#fff; padding:8px 10px; border-radius:8px; font-size:13px; opacity:0; transform:translateY(6px); transition:opacity .14s ease, transform .14s ease; pointer-events:none; white-space:nowrap; }
  .cart-float.show-tooltip .cart-tooltip{ opacity:1; transform:translateY(0); }
  .empty-hint{ font-size:12px; color:#666; margin-top:6px; text-align:center; }
  footer{ text-align:center; margin-top:40px; padding:20px 10px; color:var(--muted); }
  .socials{ display:flex; justify-content:center; gap:10px; margin-top:12px; }
  .socials a{ background:#fff; padding:8px 14px; border-radius:10px; box-shadow:var(--shadow); color:var(--neo-olive-2); font-weight:700; }
  .toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:110px; background:#111; color:#fff; padding:10px 14px; border-radius:10px; opacity:0; transition:opacity .18s ease; z-index:2000; }
  .toast.show{ opacity:1 }
</style>
</head>

<body>

<header class="header">
  <img src="assets/images/logo.png" class="logo" alt="NEO CAFE Logo" onerror="this.style.display='none'">
  <h1 class="title">نيو كافية منيو - NEO CAFE'</h1>
  <div class="neo-tag">Make It NEO Time</div>
  <div class="subtitle">اختار القسم واضغط "أضف للسلة"</div>
</header>

<div class="container">
  <div class="tabs-wrap">
    <div class="tabs" id="tabs" role="tablist" aria-label="أقسام المنيو">
      <!-- new order of tabs: الكل ، مشروبات باردة ، مشروبات ساخنة ، أطباق ديزيرت ، مميز نيو -->
      <button class="tab active" data-cat="all" role="tab" aria-selected="true">الكل</button>
      <button class="tab" data-cat="cold" role="tab">مشروبات باردة</button>
      <button class="tab" data-cat="hot" role="tab">مشروبات ساخنة</button>
      <button class="tab" data-cat="dessert_dishes" role="tab">أطباق ديزيرت</button>
      <button class="tab" data-cat="special" role="tab">مميز نيو</button>
    </div>
    <div class="tabs-underline" id="tabsUnderline" aria-hidden="true"></div>
  </div>

  <main id="content" aria-live="polite"></main>

  <footer>
    <div>تابعنا على السوشيال</div>
    <div class="socials">
      <a href="https://facebook.com/neo.cafe.eg" target="_blank" rel="noopener">Facebook</a>
      <a href="https://instagram.com/neocafe.eg" target="_blank" rel="noopener">Instagram</a>
      <a href="https://tiktok.com/@neo.cafe.eg" target="_blank" rel="noopener">TikTok</a>
    </div>
  </footer>
</div>

<!-- CART FLOAT: icon + pill + tooltip -->
<div id="cartFloat" class="cart-float" aria-live="polite" aria-label="سلة الطلب">
  <div class="cart-tooltip" id="cartTooltip">اضغط لعرض السلة</div>

  <button id="cartBtn" class="cart-btn" aria-label="الانتقال للسلة" title="الانتقال للسلة">
    <svg width="34" height="34" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <path d="M6 6H21L20 12H8L6 6Z" stroke="#fff" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M7 18C7.552 18 8 17.552 8 17C8 16.448 7.552 16 7 16C6.448 16 6 16.448 6 17C6 17.552 6.448 18 7 18Z" fill="#fff"/>
      <path d="M18 18C18.552 18 19 17.552 19 17C19 16.448 18.552 16 18 16C17.448 16 17 16.448 17 17C17 17.552 17.448 18 18 18Z" fill="#fff"/>
    </svg>

    <div id="cartBadge" class="cart-badge" aria-hidden="true">0</div>
    <div id="pulseRing" class="pulse-ring" aria-hidden="true"></div>
  </button>

  <div id="cartPill" class="cart-pill" style="display:none" role="button" aria-label="افتح السلة">
    <div style="display:flex;flex-direction:column;align-items:flex-end;line-height:1">
      <div style="font-size:13px">افتح السلة</div>
      <div class="pill-total" id="pillTotal">0 ج</div>
    </div>
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <path d="M9 18l6-6-6-6" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
/* ========== MENU DATA ========== */
/* added "cat" values: hot, cold, dessert_dishes, bakery (kept for compatibility), special */
const MENU = [
  {id:'hot1',cat:'hot',name:'لاتيه كلاسيك',price:45,desc:'رغوة ناعمة وقوام كريمي',image:'https://via.placeholder.com/400x300?text=Latte'},
  {id:'hot2',cat:'hot',name:'كابتشينو',price:50,desc:'اسبريسو وقشدة خفيفة',image:'https://via.placeholder.com/400x300?text=Cappuccino'},
  {id:'hot3',cat:'hot',name:'موكا شوكولاتة',price:60,desc:'قهوة ومزيج شوكولاتة غني',image:'https://via.placeholder.com/400x300?text=Mocha'},

  {id:'cold1',cat:'cold',name:'آيس لاتيه',price:55,desc:'لاتيه بارد منعش',image:'https://via.placeholder.com/400x300?text=Iced+Latte'},
  {id:'cold2',cat:'cold',name:'فرابتشينو فانيلا',price:65,desc:'مخفوق مثلّج كريم',image:'https://via.placeholder.com/400x300?text=Frappe'},
  {id:'cold3',cat:'cold',name:'ليمون نعناع',price:40,desc:'انتعاش طبيعي',image:'https://via.placeholder.com/400x300?text=Mint+Lemon'},

  {id:'dess1',cat:'dessert_dishes',name:'تشيز كيك بالأحمر',price:55,desc:'تشيز كيك كريمي مع صوص فراولة',image:'https://via.placeholder.com/400x300?text=Cheesecake'},
  {id:'dess2',cat:'dessert_dishes',name:'براوني بالشوكولاتة',price:45,desc:'براوني طري غني',image:'https://via.placeholder.com/400x300?text=Brownie'},
  {id:'dess3',cat:'dessert_dishes',name:'بان كيك بالعسل',price:40,desc:'بان كيك سميك مع عسل طبيعي',image:'https://via.placeholder.com/400x300?text=Pancake'},

  {id:'bak1',cat:'bakery',name:'كرواسون زبدة',price:25,desc:'كرواسون طازج',image:'https://via.placeholder.com/400x300?text=Croissant'},
  {id:'bak2',cat:'bakery',name:'ساندوتش جبنة',price:30,desc:'سندوتش طازج',image:'https://via.placeholder.com/400x300?text=Sandwich'},
  {id:'bak3',cat:'bakery',name:'بريوش بالعسل',price:35,desc:'بريوش ناعم بالعسل',image:'https://via.placeholder.com/400x300?text=Brioche'},

  {id:'spec1',cat:'special',name:'نيو سبشل آيس',price:75,desc:'مشروب خاص من نيو بكريمة ونكهات',image:'https://via.placeholder.com/400x300?text=Neo+Special'},
  {id:'spec2',cat:'special',name:'حلوى نيو الخاصة',price:95,desc:'أطباق ديزيرت مميزة من الشيف',image:'https://via.placeholder.com/400x300?text=Neo+Dessert'},
];

/* ========== STORAGE ========== */
const CART_KEY = 'neoCafe_cart_v1';
function loadCart(){ try{ const r = localStorage.getItem(CART_KEY); return r ? JSON.parse(r) : []; } catch(e){ return []; } }
function saveCart(cart){ try{ localStorage.setItem(CART_KEY, JSON.stringify(cart)); renderCartUI(true); } catch(e){ console.error(e); } }
function clearCart(){ if(!confirm('تفريغ السلة؟')) return; localStorage.removeItem(CART_KEY); renderCartUI(); }

/* ========== UI helpers ========= */
const cartBtn = document.getElementById('cartBtn');
const cartBadge = document.getElementById('cartBadge');
const cartPill = document.getElementById('cartPill');
const pillTotal = document.getElementById('pillTotal');
const pulseRing = document.getElementById('pulseRing');
const cartFloat = document.getElementById('cartFloat');
const cartTooltip = document.getElementById('cartTooltip');

function calcTotals(cart){
  let total=0, count=0;
  for(const it of cart){ total += (Number(it.price)||0)*(Number(it.qty)||0); count += Number(it.qty)||0; }
  return { total, count };
}

/* show/hide cart UI, called after saveCart or add */
function renderCartUI(wasAdded=false){
  const cart = loadCart();
  if(!cart || cart.length === 0){
    cartBadge.style.display = 'none';
    cartPill.style.display = 'none';
    cartTooltip.textContent = 'السلة فارغة';
    cartFloat.classList.remove('show-tooltip');
    return;
  }
  const { total, count } = calcTotals(cart);
  cartBadge.style.display = 'block';
  cartBadge.textContent = count;
  pillTotal.textContent = `${total} ج`;
  cartPill.style.display = 'flex';
  cartTooltip.textContent = 'اضغط لعرض السلة';
  if(wasAdded){
    pulseRing.classList.remove('show');
    void pulseRing.offsetWidth;
    pulseRing.classList.add('show');
    cartBtn.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-8px)' }, { transform: 'translateY(0)' }], { duration: 420, easing: 'cubic-bezier(.2,.85,.25,1)' });
    cartPill.animate([{ transform:'translateY(0)' }, { transform:'translateY(-6px)' }, { transform:'translateY(0)' }], { duration:380 });
  }
}

/* initial render */
renderCartUI();

/* cart interactions */
cartBtn.addEventListener('click', ()=> window.location.href = 'checkout.html');
cartPill.addEventListener('click', ()=> window.location.href = 'checkout.html');
cartFloat.addEventListener('mouseenter', ()=> cartFloat.classList.add('show-tooltip'));
cartFloat.addEventListener('mouseleave', ()=> cartFloat.classList.remove('show-tooltip'));
cartFloat.addEventListener('touchstart', ()=> { cartFloat.classList.add('show-tooltip'); setTimeout(()=>cartFloat.classList.remove('show-tooltip'),1200); });

/* ========== PRODUCT RENDER with STAGGER ========== */
function createCard(item, idx){
  const el = document.createElement('div');
  el.className = 'card';
  el.style.animationDelay = `${idx * 70}ms`;
  el.innerHTML = `
    <img class="thumb" src="${item.image}" alt="${escapeHtml(item.name)}">
    <div class="meta">
      <h3>${escapeHtml(item.name)}</h3>
      <p>${escapeHtml(item.desc)}</p>
      <div class="price">${item.price} ج</div>
    </div>
    <div class="actions">
      <button class="btn btn-outline" onclick='viewDetails("${item.id}")' aria-label="عرض ${escapeHtml(item.name)}">عرض</button>
      <button class="btn btn-primary" onclick='addToCart(${JSON.stringify(item).replaceAll("'", "\\'")})' aria-label="أضف ${escapeHtml(item.name)} للسلة">أضف للسلة</button>
    </div>
  `;
  return el;
}

/* render category: special handling for 'all' */
function renderCategory(cat){
  const content = document.getElementById('content');
  content.innerHTML = '';
  const title = document.createElement('div');
  title.className = 'section-title';

  let itemsToShow = [];
  if(cat === 'all'){
    title.textContent = 'كل المنتجات';
    itemsToShow = MENU.slice();
  } else if(cat === 'cold'){
    title.textContent = 'مشروبات باردة';
    itemsToShow = MENU.filter(i => i.cat === 'cold');
  } else if(cat === 'hot'){
    title.textContent = 'مشروبات ساخنة';
    itemsToShow = MENU.filter(i => i.cat === 'hot');
  } else if(cat === 'dessert_dishes'){
    title.textContent = 'أطباق ديزيرت';
    itemsToShow = MENU.filter(i => i.cat === 'dessert_dishes' || i.cat === 'dessert' );
  } else if(cat === 'special'){
    title.textContent = 'مميز نيو';
    itemsToShow = MENU.filter(i => i.cat === 'special');
  } else {
    title.textContent = cat;
    itemsToShow = MENU.filter(i => i.cat === cat);
  }

  content.appendChild(title);
  const grid = document.createElement('div');
  grid.className = 'grid';
  itemsToShow.forEach((it, idx) => grid.appendChild(createCard(it, idx)));
  content.appendChild(grid);

  requestAnimationFrame(() => moveUnderlineToActiveTab());
}

/* view details popup */
function viewDetails(id){
  const item = MENU.find(i=>i.id===id);
  if(!item) return alert('المنتج غير موجود');
  const w = window.open('','_blank','width=420,height=600,scrollbars=yes');
  w.document.write(`<html dir="rtl"><head><meta charset="utf-8"><title>${item.name}</title></head><body style="font-family:Cairo;padding:18px;"><h2>${item.name}</h2><img src="${item.image}" style="width:100%;border-radius:8px"><p style="color:#666;margin-top:12px">${item.desc}</p><p style="font-weight:800">${item.price} ج</p><button style="padding:10px 12px;background:${'#2f5d3a'};border:0;color:#fff;border-radius:8px;cursor:pointer" onclick="window.opener.addToCart(${JSON.stringify(item)})">أضف للسلة</button></body></html>`);
}

/* escape helper */
function escapeHtml(s){ return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* ========== CART logic ========== */
function addToCart(item){
  const cart = loadCart();
  const existing = cart.find(i => i.id === item.id);
  if(existing) existing.qty = Number(existing.qty) + 1;
  else cart.push({...item, qty:1});
  saveCart(cart);
  showToast(`${item.name} اتضاف للسلة ✔`);
}

/* helper storage functions (used earlier) */
function loadCart(){ try{ const r = localStorage.getItem(CART_KEY); return r ? JSON.parse(r) : []; } catch(e){ return []; } }
function saveCart(cart){ try{ localStorage.setItem(CART_KEY, JSON.stringify(cart)); renderCartUI(true); } catch(e){ console.error(e); } }
function clearCart(){ if(!confirm('تفريغ السلة؟')) return; localStorage.removeItem(CART_KEY); renderCartUI(); }

/* ========== toast ========= */
function showToast(text){
  const t = document.getElementById('toast');
  t.textContent = text;
  t.classList.add('show');
  setTimeout(()=> t.classList.remove('show'), 1200);
}

/* ========== Tabs underline movement ========= */
const tabsEl = document.getElementById('tabs');
const underlineEl = document.getElementById('tabsUnderline');

function moveUnderlineToActiveTab(){
  const active = tabsEl.querySelector('.tab.active');
  if(!active || !underlineEl) return;
  const tabsRect = tabsEl.getBoundingClientRect();
  const rect = active.getBoundingClientRect();
  const width = Math.max(40, rect.width * 0.9);
  const center = (rect.left + rect.right)/2 - tabsRect.left;
  underlineEl.style.width = `${width}px`;
  underlineEl.style.right = `calc(50% - ${center}px)`;
  underlineEl.style.opacity = '1';
}

/* tabs click behavior */
document.querySelectorAll('.tab').forEach(btn=>{
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    btn.classList.add('active');
    renderCategory(btn.dataset.cat);
  });
});

/* init */
renderCategory('all');
renderCartUI();

/* expose for popup windows */
window.addToCart = addToCart;
window.clearCart = clearCart;
window.renderCartUI = renderCartUI;
</script>
</body>
</html>
