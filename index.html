<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>نيو كافية منيو - NEO CAFE</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --neo-green:#124d33;
  --neo-green-2:#2f6b46;
  --neo-beige:#f6efe6;
  --muted:#6b6b6b;
  --card-radius:12px;
  --shadow: 0 14px 40px rgba(12,30,18,0.06);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;background:var(--neo-beige);font-family:"Cairo",sans-serif;color:#111}
img{max-width:100%;display:block}

/* Header */
.header{padding:16px 14px 8px;text-align:center;position:relative}
.header .logo{position:absolute;top:8px;right:12px;width:88px;height:auto;object-fit:contain}
.header h1{margin:0;font-size:20px;color:var(--neo-green);font-weight:900}
.header p{margin:6px 0 0;color:var(--neo-green-2);font-weight:700}

/* Categories */
.cats{display:flex;gap:8px;overflow-x:auto;padding:12px;border-bottom:1px solid rgba(0,0,0,0.04)}
.cat{flex:0 0 auto;background:#fff;border-radius:999px;padding:10px 14px;border:1px solid rgba(18,77,51,0.06);font-weight:800;color:var(--neo-green);cursor:pointer;white-space:nowrap}
.cat.active{background:linear-gradient(180deg,var(--neo-green),var(--neo-green-2));color:#fff;box-shadow:0 10px 30px rgba(18,77,51,0.12)}

/* container */
.container{padding:12px;max-width:920px;margin:8px auto}
.section-title{font-size:16px;font-weight:900;color:var(--neo-green-2);margin:6px 0 12px;text-align:right}

/* layout of groups: each group is either direct items or clickable subcategory */
.group{background:#fff;border-radius:12px;padding:12px;margin-bottom:12px;box-shadow:var(--shadow)}
.group .group-head{display:flex;justify-content:space-between;align-items:center;cursor:default}
.group .subcats{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.subcat{background:var(--neo-beige);padding:8px 10px;border-radius:10px;border:1px solid rgba(0,0,0,0.04);cursor:pointer;font-weight:800;color:var(--neo-green-2)}

/* grid for simple items */
.items-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
.item-card{background:#fff;border-radius:10px;padding:10px;box-shadow:0 6px 18px rgba(10,20,15,0.04);display:flex;align-items:center;gap:10px}
.item-title{font-weight:800;color:var(--neo-green);font-size:15px}

/* cart float */
.cart-float{position:fixed;left:14px;bottom:14px;z-index:9999;display:flex;align-items:center;gap:8px}
.cart-btn{background:linear-gradient(180deg,var(--neo-green),var(--neo-green-2));color:#fff;border-radius:14px;padding:10px 14px;display:flex;align-items:center;gap:8px;box-shadow:0 24px 70px rgba(18,77,51,0.2);cursor:pointer}
.cart-count{background:#ffeb3b;color:#111;border-radius:999px;padding:6px 8px;font-weight:900}

/* modal style */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:flex-end;justify-content:center;padding:14px;z-index:9998}
.modal-backdrop.show{display:flex}
.modal{width:100%;max-width:720px;background:#fff;border-radius:16px;padding:12px;box-shadow:0 30px 60px rgba(0,0,0,0.25);direction:rtl}
.modal h3{margin:0 0 8px;color:var(--neo-green);font-weight:900}
.modal .list{max-height:52vh;overflow:auto;padding-right:6px}
.modal .list .row{display:flex;align-items:center;justify-content:space-between;padding:10px 6px;border-bottom:1px solid #f3f3f3}
.modal .row .name{font-weight:800}

/* add button style */
.add-btn{background:var(--neo-green);color:#fff;padding:8px 10px;border-radius:10px;border:0;cursor:pointer;font-weight:900}

/* footer socials */
.footer{padding:18px 12px 34px;text-align:center;color:var(--muted);margin-top:8px}
.socials{display:flex;justify-content:center;gap:10px;margin-top:10px;flex-wrap:wrap}

/* responsive */
@media (max-width:520px){
  .items-grid{grid-template-columns:1fr}
  .header .logo{width:72px}
  .modal{border-radius:12px;padding:10px}
  .modal-backdrop{align-items:flex-end}
}
</style>
</head>
<body>

<header class="header">
  <img src="assets/images/logo.png" class="logo" alt="NEO CAFE" onerror="this.style.display='none'">
  <h1>نيو كافية منيو - NEO CAFE</h1>
  <p>Make It NEO Time</p>
</header>

<!-- categories quick row (filter) -->
<div class="cats" id="catsRow">
  <div class="cat active" data-cat="all">الكل</div>
  <div class="cat" data-cat="hot">مشروبات ساخنة</div>
  <div class="cat" data-cat="cold">مشروبات باردة</div>
  <div class="cat" data-cat="soft">سوفت درينك</div>
  <div class="cat" data-cat="dessert">ديزيرت</div>
  <div class="cat" data-cat="special">مميز نيو</div>
  <div class="cat" data-cat="fun">دلع نفسك في نيو</div>
</div>

<main class="container" id="mainContent">
  <!-- Groups will be rendered here by JS -->
</main>

<!-- floating cart -->
<div class="cart-float">
  <div id="cartBtn" class="cart-btn" aria-label="السلة">
    <div class="cart-count" id="cartCount">0</div>
    <div style="font-weight:900">السلة</div>
  </div>
</div>

<!-- modal for subcategory items -->
<div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h3 id="modalTitle">العناصر</h3>
    <div class="list" id="modalList"></div>
    <div style="display:flex;justify-content:flex-end;margin-top:8px;gap:8px">
      <button id="closeModal" class="add-btn" style="background:#888">إغلاق</button>
    </div>
  </div>
</div>

<!-- cart modal (small) -->
<div id="cartModalBackdrop" class="modal-backdrop" style="display:none;align-items:center;">
  <div class="modal" style="max-width:420px;">
    <h3>محتويات السلة</h3>
    <div id="cartItemsList" class="list"></div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
      <button id="goCheckout" class="add-btn">اطلب دلوقتي</button>
      <button id="clearCart" class="add-btn" style="background:#c33">تفريغ</button>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="socials">
    <a href="https://facebook.com/neo.cafe.eg" target="_blank" style="color:#1877F2;font-weight:800">Facebook</a>
    <a href="https://instagram.com/neocafe.eg" target="_blank" style="font-weight:800">Instagram</a>
    <a href="https://tiktok.com/@neo.cafe.eg" target="_blank" style="font-weight:800">TikTok</a>
  </div>
</footer>

<script>
/* ========== Config ========== */
const CART_KEY = 'neoCafe_cart_v1';

/* حسب طلبك: لما الصفحة تتعمل Refresh السلة ترجع صفر (نمسحها في صفحة المنيو) */
localStorage.removeItem(CART_KEY); // <--- هذا يضمن أن السلة فاضية عند فتح المنيو

/* ========== Menu Data (بدون أسعار) ==========
   - المجموعات الرئيسية تحتوي أنواع فرعية أو عناصر مباشرة
   - كل عنصر بالصيغة { id, name }
*/
const MENU = {
  hot: {
    title: 'المشروبات الساخنة',
    // هنا أصناف فردية (ستعرض مباشرة في group items-grid)
    items: [
      'شاي','شاي أخضر','شاي نكهات','شاي بحليب',
      'نعناع','ينسون','جنزبيل','اسبريسو','اسبريسو دبل',
      'قهوة تركي سنجل','قهوة تركي دبل','قهوة فرنساوي','قهوة بندق',
      'قهوة نوتيلا','قهوة بستاشيو','لاتيه','اسبانش لاتيه','كابتشينو',
      'نسكافيه','أميركان كوفي','هوت شوكليت','هوت سيدر','سحلب',
      'سحلب مكسرات','سحلب لوتس','سحلب بستاشيو','سحلب نوتيلا','سحلب فواكه'
    ].map((n,i)=>({ id:`hot_${i+1}`, name:n }))
  },

  cold: {
    title: 'المشروبات الباردة',
    // هذه المرة نقسمها إلى subcategories (تفتح Modal)
    subcats: [
      { key:'milkshake', title:'ملك تشيك (Milkshake)', items:[
        'ملك تشيك - أوريو','ملك تشيك - هوهوز','ملك تشيك - فانليا','ملك تشيك - كراميل',
        'ملك تشيك - فراولة','ملك تشيك - مانجو','ملك تشيك - اسنيكرز','ملك تشيك - مورو',
        'ملك تشيك - شوكلت','ملك تشيك - نيو (مورو / هوهوز / أوريو)'
      ]},
      { key:'iced', title:'آيس (Iced)', items:[
        'آيس لاتيه','آيس كوفي','آيس أميركان','آيس سبانش لاتيه'
      ]},
      { key:'frapp', title:'فرابتشينو / فربتشينو', items:[
        'فرابتشينو - شوكليت','فرابتشينو - كراميل','فرابتشينو - أوريو','فرابتشينو - اسنيكرز'
      ]},
      { key:'fresh', title:'فريش (عصائر طازجة)', items:[
        'فريش مانجو','فريش فراولة','فراولة لبن','موز لبن','بلح','بطيخ','برتقال',
        'كيوي (موسمي)','افوجاتو','جوافة','نيو: أفوجاتو / عسل / مكسرات / مانجو / موز','فريش كوكتيل','كوكتيل قطع'
      ]},
      { key:'smoothie', title:'سموثي / اسموزي', items:[
        'اسموزي فراولة','اسموزي مانجو','اسموزي أناناس','اسموزي خوخ','اسموزي كيوي','اسموزي بطيخ','اسموزي بلوبري'
      ]},
      { key:'soda', title:'الصودا (Soda / Sparkling)', items:[
        'بلوبري صودا','بلو صودا','برانديت صودا','فراولة صودا','أناناس صودا','خوخ صودا',
        'موخيتو','موخيتو أناناس','موخيتو فراولة','موخيتو بلوبري'
      ]}
    ]
  },

  soft: {
    title: 'سوفت درينك / معلبات ومشروبات تلاجة',
    subcats: [
      { key:'soft_all', title:'جميع السوفت درينك', items:[
        'V-Cola Soda','V-Cola Cola','V-Cola Diet','ريد بول (Red Bull)','تويست (Twist)',
        'شويبس (Schweppes)','فيروز','جهينه طبيعي مانجو','جهينه طبيعي تفاح','جهينه ميكس فراولة لبن'
      ]}
    ]
  },

  dessert: {
    title:'ديزيرت (حلويات)',
    items: [
      'وافل كلاسيك','وافل نوتيلا','وافل أوريو','وافل لوتس','وافل بستاشيو','وافل فواكه',
      'مولتن','تشيز كيك','شوكليت كيك'
    ].map((n,i)=>({ id:`dess_${i+1}`, name:n }))
  },

  special: {
    title:'مميز نيو',
    items: [
      'بطاطا فواكه ومكسرات وعسل','اندومي بقطع الفراخ بتتبيلة نيو المميزة',
      'كوكتيل نيو المميز (قطع فاكهة فاخرة مع سموزي وعسل ومكسرات وهوهوز ومورو)'
    ].map((n,i)=>({ id:`spec_${i+1}`, name:n }))
  },

  fun: {
    title:'دلّع نفسك في نيو — (مجانًا)',
    items: [
      'لعبة دومينو','كوتشينة (كوتشينه)','شطرنج','قول أميم','افتح توبيك'
    ].map((n,i)=>({ id:`fun_${i+1}`, name:n }))
  }
};

/* ======= Helpers ======= */
function createId(prefix, idx){ return `${prefix}_${idx}`; }
function loadCart(){ try{ const d = localStorage.getItem(CART_KEY); return d ? JSON.parse(d) : []; } catch(e){ return []; } }
function saveCart(cart){ try{ localStorage.setItem(CART_KEY, JSON.stringify(cart)); renderCartCount(true); } catch(e){ console.error(e); } }
function findInCart(cart,id){ return cart.find(x=>x.id===id); }

/* ======= Render Main Groups ======= */
const main = document.getElementById('mainContent');

function renderAll(){
  main.innerHTML = '';

  // Hot (direct items)
  const hotGroup = document.createElement('div'); hotGroup.className='group';
  hotGroup.innerHTML = `<div class="group-head"><div style="font-weight:900">${MENU.hot.title}</div></div>`;
  const hotGrid = document.createElement('div'); hotGrid.className='items-grid';
  MENU.hot.items.forEach(it=>{
    const card = document.createElement('div'); card.className='item-card';
    card.innerHTML = `<div class="item-title">${it.name}</div><div><button class="add-btn" data-id="${it.id}" data-name="${escapeHtml(it.name)}">أضف</button></div>`;
    hotGrid.appendChild(card);
  });
  hotGroup.appendChild(hotGrid);
  main.appendChild(hotGroup);

  // Cold group with subcategories (click opens modal)
  const coldGroup = document.createElement('div'); coldGroup.className='group';
  coldGroup.innerHTML = `<div class="group-head"><div style="font-weight:900">${MENU.cold.title}</div></div>`;
  const coldSubs = document.createElement('div'); coldSubs.className='subcats';
  MENU.cold.subcats.forEach(sc=>{
    const btn = document.createElement('div'); btn.className='subcat'; btn.dataset.sub = sc.key; btn.textContent = sc.title;
    coldSubs.appendChild(btn);
  });
  coldGroup.appendChild(coldSubs);
  main.appendChild(coldGroup);

  // Soft drinks group (subcats)
  const softGroup = document.createElement('div'); softGroup.className='group';
  softGroup.innerHTML = `<div class="group-head"><div style="font-weight:900">${MENU.soft.title}</div></div>`;
  const softSubs = document.createElement('div'); softSubs.className='subcats';
  MENU.soft.subcats.forEach(sc=>{
    const btn = document.createElement('div'); btn.className='subcat'; btn.dataset.sub = sc.key; btn.textContent = sc.title;
    softSubs.appendChild(btn);
  });
  softGroup.appendChild(softSubs);
  main.appendChild(softGroup);

  // Dessert (direct)
  const dessGroup = document.createElement('div'); dessGroup.className='group';
  dessGroup.innerHTML = `<div class="group-head"><div style="font-weight:900">${MENU.dessert.title}</div></div>`;
  const dessGrid = document.createElement('div'); dessGrid.className='items-grid';
  MENU.dessert.items.forEach(it=>{
    const card = document.createElement('div'); card.className='item-card';
    card.innerHTML = `<div class="item-title">${it.name}</div><div><button class="add-btn" data-id="${it.id}" data-name="${escapeHtml(it.name)}">أضف</button></div>`;
    dessGrid.appendChild(card);
  });
  dessGroup.appendChild(dessGrid);
  main.appendChild(dessGroup);

  // Special
  const spGroup = document.createElement('div'); spGroup.className='group';
  spGroup.innerHTML = `<div class="group-head"><div style="font-weight:900">${MENU.special.title}</div></div>`;
  const spGrid = document.createElement('div'); spGrid.className='items-grid';
  MENU.special.items.forEach(it=>{
    const card = document.createElement('div'); card.className='item-card';
    card.innerHTML = `<div class="item-title">${it.name}</div><div><button class="add-btn" data-id="${it.id}" data-name="${escapeHtml(it.name)}">أضف</button></div>`;
    spGrid.appendChild(card);
  });
  spGroup.appendChild(spGrid);
  main.appendChild(spGroup);

  // Fun (free games) - direct items
  const funGroup = document.createElement('div'); funGroup.className='group';
  funGroup.innerHTML = `<div class="group-head"><div style="font-weight:900">${MENU.fun.title}</div></div>`;
  const funGrid = document.createElement('div'); funGrid.className='items-grid';
  MENU.fun.items.forEach(it=>{
    const card = document.createElement('div'); card.className='item-card';
    card.innerHTML = `<div class="item-title">${it.name}</div><div><button class="add-btn" data-id="${it.id}" data-name="${escapeHtml(it.name)}">أضف</button></div>`;
    funGrid.appendChild(card);
  });
  funGroup.appendChild(funGrid);
  main.appendChild(funGroup);
}

/* Utility escape function for names in attributes */
function escapeHtml(s){ return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* ======= Modal logic (B - Popup) ======= */
const modalBackdrop = document.getElementById('modalBackdrop');
const modalTitle = document.getElementById('modalTitle');
const modalList = document.getElementById('modalList');
const closeModalBtn = document.getElementById('closeModal');

function openSubcatModal(key){
  // find subcat by key among cold and soft
  const allSubs = [...MENU.cold.subcats, ...(MENU.soft.subcats || [])];
  const sc = allSubs.find(s=>s.key === key);
  if(!sc) return;
  modalTitle.textContent = sc.title;
  modalList.innerHTML = '';
  sc.items.forEach((name, idx)=>{
    const id = `${key}_${idx+1}`;
    const row = document.createElement('div');
    row.className = 'row';
    row.innerHTML = `<div class="name">${name}</div><div><button class="add-btn" data-id="${id}" data-name="${escapeHtml(name)}">أضف</button></div>`;
    modalList.appendChild(row);
  });
  modalBackdrop.classList.add('show');
  modalBackdrop.setAttribute('aria-hidden','false');
}
closeModalBtn.addEventListener('click', ()=> { modalBackdrop.classList.remove('show'); modalBackdrop.setAttribute('aria-hidden','true'); });
modalBackdrop.addEventListener('click', (e)=> { if(e.target === modalBackdrop){ modalBackdrop.classList.remove('show'); modalBackdrop.setAttribute('aria-hidden','true'); } });

/* ======= Cart behavior (fast, no locks) ======= */
const cartBtn = document.getElementById('cartBtn');
const cartCountEl = document.getElementById('cartCount');
const cartModalBackdrop = document.getElementById('cartModalBackdrop');
const cartItemsList = document.getElementById('cartItemsList');
const goCheckoutBtn = document.getElementById('goCheckout');
const clearCartBtn = document.getElementById('clearCart');

function renderCartCount(wasAdded=false){
  const cart = loadCart();
  const totalQty = cart.reduce((s,i)=> s + Number(i.qty||0), 0);
  cartCountEl.textContent = totalQty;
  if(wasAdded){
    cartBtn.classList.add('pulse');
    setTimeout(()=> cartBtn.classList.remove('pulse'), 700);
  }
}

function openCartModal(){
  const cart = loadCart();
  cartItemsList.innerHTML = '';
  if(!cart || cart.length === 0){
    cartItemsList.innerHTML = `<div style="padding:12px;color:var(--muted);font-weight:800">السلة فارغة</div>`;
  } else {
    cart.forEach((it, idx)=>{
      const row = document.createElement('div'); row.className='row';
      row.innerHTML = `<div style="font-weight:800">${idx+1}. ${escapeHtml(it.name)} × ${it.qty}</div>
        <div style="display:flex;gap:6px">
          <button class="add-btn" data-action="dec" data-id="${it.id}">−</button>
          <button class="add-btn" data-action="inc" style="background:#ddd;color:#111" data-id="${it.id}">+</button>
          <button class="add-btn" data-action="rem" style="background:#c33" data-id="${it.id}">حذف</button>
        </div>`;
      cartItemsList.appendChild(row);
    });
  }
  cartModalBackdrop.style.display = 'flex';
  cartModalBackdrop.setAttribute('aria-hidden','false');
}
function closeCartModal(){ cartModalBackdrop.style.display = 'none'; cartModalBackdrop.setAttribute('aria-hidden','true'); }

/* cart item controls from modal */
cartItemsList.addEventListener('click', (e)=>{
  const btn = e.target.closest('button');
  if(!btn) return;
  const action = btn.dataset.action;
  const id = btn.dataset.id;
  let cart = loadCart();
  if(action === 'inc'){
    const it = cart.find(x=>x.id===id); if(it){ it.qty = Number(it.qty)+1; saveCart(cart); renderCartCount(true); openCartModal(); }
  } else if(action === 'dec'){
    const it = cart.find(x=>x.id===id); if(it){ it.qty = Number(it.qty)-1; if(it.qty<=0) cart = cart.filter(x=>x.id!==id); saveCart(cart); openCartModal(); renderCartCount(false); }
  } else if(action === 'rem'){
    cart = cart.filter(x=>x.id!==id); saveCart(cart); openCartModal(); renderCartCount(false);
  }
});

/* clear cart and go to checkout */
clearCartBtn.addEventListener('click', ()=>{
  if(confirm('تفريغ السلة؟')){
    localStorage.removeItem(CART_KEY);
    renderCartCount(false);
    openCartModal();
  }
});
goCheckoutBtn.addEventListener('click', ()=> {
  // go to checkout page (الصفحة بتستعمل نفس المفتاح localStorage)
  closeCartModal();
  window.location.href = 'checkout.html';
});

/* Cart button open/close */
cartBtn.addEventListener('click', ()=> {
  openCartModal();
});

/* close cart when clicking outside modal area */
cartModalBackdrop.addEventListener('click', (e)=> { if(e.target === cartModalBackdrop) closeCartModal(); });

/* ======= Delegated click: add buttons, subcat open, tabs ======= */
document.addEventListener('click', (e)=>{
  // add buttons (instant add, no locks)
  const add = e.target.closest('.add-btn');
  if(add && add.dataset.id){
    const id = add.dataset.id;
    const name = add.dataset.name || (add.closest('.row')?.querySelector('.name')?.textContent || 'منتج');
    const cart = loadCart();
    const existing = findInCart(cart,id);
    if(existing) existing.qty = Number(existing.qty) + 1;
    else cart.push({ id, name, qty: 1 });
    saveCart(cart);
    renderCartCount(true);
    return;
  }

  // subcategory open
  const scBtn = e.target.closest('.subcat');
  if(scBtn && scBtn.dataset.sub){
    openSubcatModal(scBtn.dataset.sub);
    return;
  }

  // category tabs filter
  const catBtn = e.target.closest('.cat');
  if(catBtn && catBtn.dataset.cat){
    document.querySelectorAll('.cat').forEach(c=>c.classList.remove('active'));
    catBtn.classList.add('active');
    const cat = catBtn.dataset.cat;
    // show only specific group (simple implementation: hide all .group and show relevant)
    document.querySelectorAll('.group').forEach(g=> g.style.display = 'none');
    if(cat === 'all'){ document.querySelectorAll('.group').forEach(g=> g.style.display = 'block'); }
    else {
      // map cat to group index by order we rendered
      const map = { hot:0, cold:1, soft:2, dessert:3, special:4, fun:5 };
      const idx = map[cat];
      if(typeof idx === 'number'){
        document.querySelectorAll('.group')[idx].style.display = 'block';
      } else { document.querySelectorAll('.group').forEach(g=> g.style.display = 'block'); }
    }
    window.scrollTo({ top: 120, behavior: 'smooth' });
    return;
  }
});

/* ======= Init render & count ======= */
renderAll();
renderCartCount(false);

</script>
</body>
</html>
