<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>منيو نيو كافيه — منظم وجذاب</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<style>
  :root{
    --bg:#f3f4f6;
    --card:#ffffff;
    --accent:#125433;
    --muted:#6b7280;
    --shadow: 0 6px 20px rgba(0,0,0,0.06);
    --radius:14px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family: "Segoe UI", Tahoma, Arial;direction:rtl;background:var(--bg);color:#111}
  header{padding:28px 16px;text-align:center}
  header h1{margin:0;font-size:28px;letter-spacing:0.6px}
  .container{max-width:1100px;margin:0 auto;padding:12px}

  /* Tabs */
  .tabs{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0}
  .tab {
    padding:10px 14px;border-radius:999px;background:transparent;border:1px solid transparent;
    cursor:pointer;font-weight:600;color:var(--muted)
  }
  .tab.active{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:var(--shadow)}

  /* Grid */
  .grid {display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:18px}
  @media(max-width:880px){ .grid{grid-template-columns:1fr} }

  .card{
    background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);
    display:flex;gap:12px;align-items:center;position:relative;overflow:hidden;
  }
  .card img{width:110px;height:80px;border-radius:10px;object-fit:cover;flex-shrink:0}
  .card .meta{flex:1}
  .card h3{margin:0;font-size:18px}
  .card .desc{color:var(--muted);font-size:13px;margin-top:6px}
  .card .price{font-weight:800;margin-top:8px}
  .card .actions{display:flex;flex-direction:column;gap:8px;align-items:flex-end}
  .btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
  .btn-primary{background:var(--accent);color:#fff}
  .btn-ghost{background:#fff;border:1px solid #e6e6e6;color:var(--muted)}

  /* Floating cart summary */
  .cart-bar{
    position:fixed;left:16px;right:16px;bottom:18px;background:#1f2937;color:#fff;padding:12px;border-radius:10px;
    display:flex;justify-content:space-between;align-items:center;gap:12px;box-shadow:0 12px 30px rgba(0,0,0,0.18)
  }
  .cart-bar .left{font-weight:700}
  .cart-bar .right{display:flex;gap:8px;align-items:center}

  /* Footer */
  footer{margin-top:32px;padding:20px 12px;text-align:center;color:var(--muted)}
  .socials{display:flex;gap:12px;justify-content:center;margin-top:10px}
  .socials a{display:inline-block;padding:8px 10px;background:#fff;border-radius:8px;text-decoration:none;color:var(--muted);box-shadow:var(--shadow)}

  /* Small helpers */
  .empty-msg{text-align:center;padding:40px;color:var(--muted);background:linear-gradient(180deg,transparent,#fff);border-radius:12px}
  .section-title{margin-top:18px;font-size:18px;font-weight:700;color:#222}
</style>
</head>
<body>

<header>
  <h1>منيو نيو كافيه</h1>
  <div style="margin-top:6px;color:var(--muted)">أختار القسم وشوف الأصناف — اضغط "أضف للسلة" واذهب للسلة لإتمام الطلب</div>
</header>

<main class="container" id="app">
  <!-- Tabs -->
  <div class="tabs" role="tablist" aria-label="أقسام المنيو">
    <button class="tab active" data-cat="hot" role="tab" aria-selected="true">مشروبات ساخنة</button>
    <button class="tab" data-cat="cold" role="tab">مشروبات باردة</button>
    <button class="tab" data-cat="bakery" role="tab">مخبوزات</button>
    <button class="tab" data-cat="dessert" role="tab">حلويات</button>
  </div>

  <!-- Sections container -->
  <div id="sections">
    <!-- سيُملأ ديناميكياً -->
  </div>

  <!-- Footer with socials + small info -->
  <footer>
    <div>تابعنا على السوشيال لتعرف أحدث العروض والخصومات</div>
    <div class="socials" aria-hidden="false">
      <a href="https://facebook.com" target="_blank" rel="noopener" title="فيسبوك">فيسبوك</a>
      <a href="https://instagram.com" target="_blank" rel="noopener" title="انستجرام">انستجرام</a>
      <a href="https://tiktok.com" target="_blank" rel="noopener" title="تيك توك">تيك توك</a>
    </div>
    <div style="margin-top:10px;font-size:13px;color:var(--muted)">رقم للطلبات: 01034311119</div>
  </footer>
</main>

<!-- Floating cart summary -->
<div class="cart-bar" id="cartBar" style="display:none" aria-live="polite">
  <div class="left">السلة: <span id="cartCount">0</span> صنف — الإجمالي: <span id="cartTotal">0</span> ج</div>
  <div class="right">
    <button class="btn btn-ghost" onclick="clearCart()">افراغ السلة</button>
    <a class="btn btn-primary" href="checkout.html" id="toCheckout">الانتقال للسلة</a>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const CART_KEY = 'neoCafe_cart_v1';

/* ===== بيانات افتراضية للأصناف (تقدر تعدّلها أو تجيبها من JSON لاحقاً) ===== */
const MENU = [
  // hot
  { id:'hot1', cat:'hot', name:'لاتيه كلاسيك', price:45, desc:'لاتيه بالكريمة ورغوة ناعمة', image:'https://via.placeholder.com/300x200?text=Latte' },
  { id:'hot2', cat:'hot', name:'كابتشينو', price:50, desc:'قهوة اسبريسو بحجم متوسط مع رغوة', image:'https://via.placeholder.com/300x200?text=Cappuccino' },
  { id:'hot3', cat:'hot', name:'موكا شوكولاتة', price:60, desc:'مزيج شوكولاتة مع قهوة اسبريسو', image:'https://via.placeholder.com/300x200?text=Mocha' },

  // cold
  { id:'cold1', cat:'cold', name:'آيس لاتيه', price:55, desc:'قهوة لاتيه باردة مع ثلج', image:'https://via.placeholder.com/300x200?text=Iced+Latte' },
  { id:'cold2', cat:'cold', name:'فرابتشينو فانيلا', price:65, desc:'مخفوق مثلّج بطعم الفانيلا', image:'https://via.placeholder.com/300x200?text=Frappe' },
  { id:'cold3', cat:'cold', name:'ليمون نعناع بارد', price:40, desc:'مشروب منعش لموسم الصيف', image:'https://via.placeholder.com/300x200?text=Mint+Lemon' },

  // bakery
  { id:'bak1', cat:'bakery', name:'كرواسون زبدة', price:25, desc:'كروسان هشي من الفرن', image:'https://via.placeholder.com/300x200?text=Croissant' },
  { id:'bak2', cat:'bakery', name:'سندوتش جبنة بالزعتر', price:30, desc:'سندوتش جاهز وصحي', image:'https://via.placeholder.com/300x200?text=Sandwich' },
  { id:'bak3', cat:'bakery', name:'بريوش بالعسل', price:35, desc:'بريوش ناعم مع لمسة عسل', image:'https://via.placeholder.com/300x200?text=Brioche' },

  // dessert
  { id:'des1', cat:'dessert', name:'تشيز كيك', price:55, desc:'تشيز كيك كريمي مع صوص توت', image:'https://via.placeholder.com/300x200?text=Cheesecake' },
  { id:'des2', cat:'dessert', name:'براوني بالشوكولاتة', price:45, desc:'براوني ناشف مع شوكولاتة غنية', image:'https://via.placeholder.com/300x200?text=Brownie' },
  { id:'des3', cat:'dessert', name:'بان كيك بالعسل', price:40, desc:'بان كيك سميك مع عسل طبيعي', image:'https://via.placeholder.com/300x200?text=Pancake' },
];

/* ===== Utilities للتخزين ===== */
function loadCart(){
  try{
    const raw = localStorage.getItem(CART_KEY);
    if(!raw) return [];
    const parsed = JSON.parse(raw);
    return Array.isArray(parsed) ? parsed : [];
  } catch(e){
    console.error('خطأ في قراءة السلة', e);
    return [];
  }
}
function saveCart(cart){
  try {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    renderCartBar();
  } catch(e) {
    console.error('خطأ في حفظ السلة', e);
  }
}
function clearCart(){
  if(!confirm('هل متأكد إنك تريد إفراغ السلة؟')) return;
  localStorage.removeItem(CART_KEY);
  renderCartBar();
  alert('تم إفراغ السلة');
}

/* ===== إضافة للصنف ===== */
function addToCart(item){
  const cart = loadCart();
  const existing = cart.find(i=> i.id === item.id);
  if(existing){
    existing.qty = Number(existing.qty) + 1;
  } else {
    cart.push({...item, qty:1});
  }
  saveCart(cart);
  // feedback سريع
  showToast(`${item.name} اتضاف للسلة ✔`);
}

/* ===== Rendering الأقسام والأصناف ===== */
function createCard(item){
  const wrap = document.createElement('div');
  wrap.className = 'card';
  wrap.innerHTML = `
    <img src="${item.image}" alt="${escapeHtml(item.name)}" loading="lazy">
    <div class="meta">
      <h3>${escapeHtml(item.name)}</h3>
      <div class="desc">${escapeHtml(item.desc)}</div>
      <div class="price">${item.price} ج</div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" onclick='viewDetails("${item.id}")'>عرض</button>
      <button class="btn btn-primary" onclick='addToCart(${JSON.stringify(item).replaceAll("'", "\\'")})'>أضف للسلة</button>
    </div>
  `;
  return wrap;
}

function renderSection(category){
  const sect = document.createElement('section');
  sect.className = 'section';
  const titleMap = { hot:'مشروبات ساخنة', cold:'مشروبات باردة', bakery:'مخبوزات', dessert:'حلويات' };
  const title = titleMap[category] || category;
  sect.innerHTML = `<div class="section-title">${title}</div>`;

  const grid = document.createElement('div');
  grid.className = 'grid';
  const items = MENU.filter(i=> i.cat === category);
  if(items.length === 0){
    const empty = document.createElement('div');
    empty.className = 'empty-msg';
    empty.textContent = 'لا توجد منتجات في هذا القسم حالياً';
    sect.appendChild(empty);
  } else {
    items.forEach(it => grid.appendChild(createCard(it)));
    sect.appendChild(grid);
  }
  return sect;
}

/* render all sections (initial) */
function renderAllSections(){
  const wrapper = document.getElementById('sections');
  wrapper.innerHTML = '';
  // ترتيب العرض: hot, cold, bakery, dessert
  ['hot','cold','bakery','dessert'].forEach(cat => wrapper.appendChild(renderSection(cat)));
}

/* Tab switching */
document.addEventListener('click', (e) => {
  const tab = e.target.closest('.tab');
  if(!tab) return;
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  tab.classList.add('active');
  const cat = tab.getAttribute('data-cat');
  // Scroll to that section
  const sections = Array.from(document.querySelectorAll('.section-title'));
  const idxMap = { hot:0, cold:1, bakery:2, dessert:3 };
  const idx = idxMap[cat] ?? 0;
  const target = sections[idx];
  if(target) target.scrollIntoView({behavior:'smooth', block:'start'});
});

/* Cart bar render */
function calcTotals(cart){
  let total = 0, count = 0;
  for(const it of cart){ total += (Number(it.price)||0) * (Number(it.qty)||0); count += Number(it.qty)||0; }
  return { total, count };
}
function renderCartBar(){
  const cart = loadCart();
  const bar = document.getElementById('cartBar');
  if(!cart || cart.length === 0) {
    bar.style.display = 'none';
    return;
  }
  const { total, count } = calcTotals(cart);
  document.getElementById('cartCount').textContent = count;
  document.getElementById('cartTotal').textContent = total;
  bar.style.display = 'flex';
}

/* Small product details (modal-light) */
function viewDetails(id){
  const item = MENU.find(i=> i.id === id);
  if(!item) return alert('منتج مش موجود');
  const w = window.open('','_blank','width=420,height=520,scrollbars=yes');
  w.document.write(`<html dir="rtl"><head><title>${item.name}</title><meta charset="utf-8"></head><body style="font-family:Arial;padding:18px"><h2>${item.name}</h2><img src="${item.image}" style="width:100%;height:auto;border-radius:8px"><p style="color:#666;margin-top:10px">${item.desc}</p><p style="font-weight:800">${item.price} ج</p><button style="padding:10px 12px;background:${'`'}${'`'};border:0;color:#fff;border-radius:8px;cursor:pointer" onclick="window.opener.addToCart(${JSON.stringify(item)})">أضف للسلة</button></body></html>`);
}

/* Simple toast */
function showToast(msg){
  const t = document.createElement('div');
  t.textContent = msg;
  Object.assign(t.style,{position:'fixed',left:'50%',transform:'translateX(-50%)',bottom:'90px',background:'#111',color:'#fff',padding:'8px 12px',borderRadius:'8px',zIndex:9999,opacity:0,transition:'all 300ms ease'});
  document.body.appendChild(t);
  requestAnimationFrame(()=> t.style.opacity = 1);
  setTimeout(()=> { t.style.opacity = 0; setTimeout(()=> t.remove(),350); }, 1600);
}

/* escape html */
function escapeHtml(s){ return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* init */
renderAllSections();
renderCartBar();

/* expose some helpers to window for popup */
window.addToCart = addToCart;
window.clearCart = clearCart;
</script>
</body>
</html>
