<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>منيو نيو كافيه — شبكي وموبايل فريندلي</title>
<style>
  :root{
    --bg:#f3f4f6;
    --card:#ffffff;
    --accent:#125433;
    --muted:#6b7280;
    --shadow: 0 6px 20px rgba(0,0,0,0.06);
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family: "Segoe UI", Tahoma, Arial;direction:rtl;background:var(--bg);color:#111}
  
  /* header with logo */
  header{
    position:relative;
    padding:22px 20px 6px 20px;
    text-align:center;
  }
  header h1{margin:0;font-size:22px}
  header p{margin:6px 0 0;color:var(--muted);font-size:14px}

  /* logo top-right */
  .logo {
    position:absolute;
    top:12px;
    left:16px; /* left because dir=rtl; visually it will be on the right side in LTR but we set left to keep consistent for rtl layout */
    /* to ensure it shows visually on the right side we use transform in rtl */
    transform: translateX(0);
    right:16px;
    left:auto;
  }
  .logo img{width:84px;height:84px;object-fit:contain;border-radius:8px;background:#fff;padding:6px;box-shadow:var(--shadow)}

  .container{max-width:1100px;margin:0 auto;padding:12px}

  /* grid: 2 columns on larger screens, 1 column on small screens */
  .grid {
    display:grid;
    grid-template-columns:repeat(2, 1fr);
    gap:14px;
    margin-top:12px;
  }
  @media (max-width:720px){
    .grid{grid-template-columns:1fr}
  }

  .card{
    background:var(--card);
    border-radius:var(--radius);
    padding:12px;
    display:flex;
    gap:12px;
    align-items:center;
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .thumb{width:110px;height:84px;border-radius:8px;flex-shrink:0;object-fit:cover;background:#f0f0f0;display:inline-block}
  .meta{flex:1;min-width:0}
  .meta h3{margin:0;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .meta .desc{margin-top:6px;color:var(--muted);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .meta .price{margin-top:8px;font-weight:800}

  .actions{display:flex;flex-direction:column;gap:8px;align-items:flex-end}
  .btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
  .btn-primary{background:var(--accent);color:#fff}
  .btn-ghost{background:#fff;border:1px solid #e6e6e6;color:var(--muted)}

  /* floating cart bottom */
  .cart-bar{
    position:fixed;left:16px;right:16px;bottom:18px;background:#1f2937;color:#fff;padding:12px;border-radius:10px;
    display:flex;justify-content:space-between;align-items:center;gap:12px;box-shadow:0 12px 30px rgba(0,0,0,0.18);
    z-index:9999;
  }
  .cart-bar .left{font-weight:700}
  .cart-bar .right{display:flex;gap:8px;align-items:center}

  /* footer socials */
  footer{margin-top:26px;padding:20px 12px;text-align:center;color:var(--muted)}
  .socials{display:flex;gap:12px;justify-content:center;margin-top:10px}
  .socials a{display:inline-block;padding:8px 10px;background:#fff;border-radius:8px;text-decoration:none;color:var(--muted);box-shadow:var(--shadow)}

  /* small helpers */
  .section-title{font-size:18px;font-weight:800;margin:18px 0 8px}
  .empty-msg{text-align:center;padding:24px;color:var(--muted);background:linear-gradient(180deg,transparent,#fff);border-radius:12px}
</style>
</head>
<body>

<header>
  <!-- LOGO top-right -->
  <div class="logo" aria-hidden="false">
    <img src="logo.png" alt="Neo Café Logo">
  </div>

  <h1>منيو نيو كافيه</h1>
  <p>منظم، سريع، ومناسب للموبايل — اضغط "أضف للسلة" عشان تحتفظ بالاختيارات</p>
</header>

<main class="container">
  <!-- sections titles (optional) -->
  <div class="section-title">مشروبات ساخنة</div>
  <div id="hotGrid" class="grid" aria-live="polite"></div>

  <div class="section-title">مشروبات باردة</div>
  <div id="coldGrid" class="grid" aria-live="polite"></div>

  <div class="section-title">مخبوزات</div>
  <div id="bakeryGrid" class="grid" aria-live="polite"></div>

  <div class="section-title">حلويات</div>
  <div id="dessertGrid" class="grid" aria-live="polite"></div>

  <footer>
    <div>تابعنا على السوشيال لتعرف أحدث العروض</div>
    <div class="socials">
      <a href="https://facebook.com" target="_blank" rel="noopener">فيسبوك</a>
      <a href="https://instagram.com" target="_blank" rel="noopener">انستجرام</a>
      <a href="https://tiktok.com" target="_blank" rel="noopener">تيك توك</a>
    </div>
    <div style="margin-top:10px;font-size:13px;color:var(--muted)">هاتف الطلبات: 01034311119</div>
  </footer>
</main>

<!-- floating cart bar -->
<div class="cart-bar" id="cartBar" style="display:none" aria-live="polite">
  <div class="left">السلة: <span id="cartCount">0</span> صنف — الإجمالي: <span id="cartTotal">0</span> ج</div>
  <div class="right">
    <button class="btn btn-ghost" onclick="clearCart()">افراغ السلة</button>
    <a class="btn btn-primary" href="checkout.html">الانتقال للسلة</a>
  </div>
</div>

<script>
/* ======= CONFIG ======= */
const CART_KEY = 'neoCafe_cart_v1';

/* ======= MENU DATA ======= */
const MENU = [
  { id:'hot1', cat:'hot', name:'لاتيه كلاسيك', price:45, desc:'لاتيه بكريمة ورغوة ناعمة', image:'https://via.placeholder.com/400x300?text=Latte' },
  { id:'hot2', cat:'hot', name:'كابتشينو', price:50, desc:'اسبريسو مع رغوة مميزة', image:'https://via.placeholder.com/400x300?text=Cappuccino' },
  { id:'hot3', cat:'hot', name:'موكا شوكولاتة', price:60, desc:'قهوة ومذاق شوكولاتة غني', image:'https://via.placeholder.com/400x300?text=Mocha' },

  { id:'cold1', cat:'cold', name:'آيس لاتيه', price:55, desc:'لاتيه مثلج منعش', image:'https://via.placeholder.com/400x300?text=Iced+Latte' },
  { id:'cold2', cat:'cold', name:'فرابتشينو فانيلا', price:65, desc:'مخفوق مثلّج بطعم الفانيلا', image:'https://via.placeholder.com/400x300?text=Frappe' },
  { id:'cold3', cat:'cold', name:'ليمون بالنعناع', price:40, desc:'مشروب منعش للصيف', image:'https://via.placeholder.com/400x300?text=Mint+Lemon' },

  { id:'bak1', cat:'bakery', name:'كرواسون زبدة', price:25, desc:'كروسان هشي من الفرن', image:'https://via.placeholder.com/400x300?text=Croissant' },
  { id:'bak2', cat:'bakery', name:'سندوتش جبنة', price:30, desc:'سندوتش جبنة طازجة', image:'https://via.placeholder.com/400x300?text=Sandwich' },
  { id:'bak3', cat:'bakery', name:'بريوش بالعسل', price:35, desc:'بريوش ناعم مع لمسة عسل', image:'https://via.placeholder.com/400x300?text=Brioche' },

  { id:'des1', cat:'dessert', name:'تشيز كيك', price:55, desc:'تشيز كيك كريمي مع صوص توت', image:'https://via.placeholder.com/400x300?text=Cheesecake' },
  { id:'des2', cat:'dessert', name:'براوني بالشوكولاتة', price:45, desc:'براوني طري ورائع', image:'https://via.placeholder.com/400x300?text=Brownie' },
  { id:'des3', cat:'dessert', name:'بان كيك بالعسل', price:40, desc:'بان كيك سميك مع عسل طبيعي', image:'https://via.placeholder.com/400x300?text=Pancake' },
];

/* ======= Storage helpers ======= */
function loadCart(){
  try {
    const raw = localStorage.getItem(CART_KEY);
    if(!raw) return [];
    const parsed = JSON.parse(raw);
    return Array.isArray(parsed) ? parsed : [];
  } catch(e){
    console.error('Error reading cart', e);
    return [];
  }
}
function saveCart(cart){
  try {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    renderCartBar();
  } catch(e){
    console.error('Error saving cart', e);
  }
}
function clearCart(){
  if(!confirm('هل متأكد إنك تريد إفراغ السلة؟')) return;
  localStorage.removeItem(CART_KEY);
  renderCartBar();
  alert('تم إفراغ السلة');
}

/* ======= Cart actions ======= */
function addToCart(item){
  const cart = loadCart();
  const existing = cart.find(i => i.id === item.id);
  if(existing){
    existing.qty = Number(existing.qty) + 1;
  } else {
    cart.push({...item, qty:1});
  }
  saveCart(cart);
  showToast(`${item.name} اتضاف للسلة ✔`);
}

/* ======= Render products into grids ======= */
function createCard(item){
  const div = document.createElement('div');
  div.className = 'card';
  div.innerHTML = `
    <img class="thumb" src="${item.image}" alt="${escapeHtml(item.name)}">
    <div class="meta">
      <h3 title="${escapeHtml(item.name)}">${escapeHtml(item.name)}</h3>
      <div class="desc">${escapeHtml(item.desc)}</div>
      <div class="price">${item.price} ج</div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" onclick='viewDetails("${item.id}")'>عرض</button>
      <button class="btn btn-primary" onclick='addToCart(${JSON.stringify(item).replaceAll("'", "\\'")})'>أضف للسلة</button>
    </div>
  `;
  return div;
}

function renderGrids(){
  const maps = {
    hot: document.getElementById('hotGrid'),
    cold: document.getElementById('coldGrid'),
    bakery: document.getElementById('bakeryGrid'),
    dessert: document.getElementById('dessertGrid'),
  };
  // clear
  Object.values(maps).forEach(el => el.innerHTML = '');
  // append
  MENU.forEach(item => {
    const container = maps[item.cat];
    if(container) container.appendChild(createCard(item));
  });
}

/* ======= small helpers ======= */
function calcTotals(cart){
  let total = 0, count = 0;
  for(const it of cart){ total += (Number(it.price)||0) * (Number(it.qty)||0); count += Number(it.qty)||0; }
  return { total, count };
}
function renderCartBar(){
  const cart = loadCart();
  const bar = document.getElementById('cartBar');
  if(!cart || cart.length === 0){ bar.style.display = 'none'; return; }
  const { total, count } = calcTotals(cart);
  document.getElementById('cartCount').textContent = count;
  document.getElementById('cartTotal').textContent = total;
  bar.style.display = 'flex';
}
function escapeHtml(s){ return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

/* ======= product detail popup (new tab) ======= */
function viewDetails(id){
  const item = MENU.find(i=> i.id === id);
  if(!item) return alert('المنتج غير موجود');
  const w = window.open('','_blank','width=420,height=620,scrollbars=yes');
  w.document.write(`<html dir="rtl"><head><meta charset="utf-8"><title>${item.name}</title></head><body style="font-family:Arial;padding:18px"><h2>${item.name}</h2><img src="${item.image}" style="width:100%;height:auto;border-radius:8px"><p style="color:#666;margin-top:10px">${item.desc}</p><p style="font-weight:800">${item.price} ج</p><button style="padding:10px 12px;background:${'#125433'};border:0;color:#fff;border-radius:8px;cursor:pointer" onclick="window.opener.addToCart(${JSON.stringify(item)})">أضف للسلة</button></body></html>`);
}

/* ======= toast ======= */
function showToast(msg){
  const t = document.createElement('div');
  t.textContent = msg;
  Object.assign(t.style,{position:'fixed',left:'50%',transform:'translateX(-50%)',bottom:'100px',background:'#111',color:'#fff',padding:'8px 12px',borderRadius:'8px',zIndex:9999,opacity:0,transition:'all 300ms ease'});
  document.body.appendChild(t);
  requestAnimationFrame(()=> t.style.opacity = 1);
  setTimeout(()=> { t.style.opacity = 0; setTimeout(()=> t.remove(),350); }, 1400);
}

/* ======= init ======= */
renderGrids();
renderCartBar();

/* expose for popup */
window.addToCart = addToCart;
window.clearCart = clearCart;
</script>

</body>
</html>
