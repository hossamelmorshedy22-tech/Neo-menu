<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>السلة — نيو كافيه</title>
<style>
  body{font-family:Arial;direction:rtl;background:#f4f4f4;padding:20px;}
  .box{background:#fff;padding:20px;border-radius:10px;max-width:700px;margin:0 auto;}
  .item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;}
  .name{font-weight:bold;}
  .empty{text-align:center;padding:30px;color:#888;}
  .btn{padding:10px 15px;background:#125433;color:#fff;border:0;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<div class="box">
  <h2>السلة</h2>
  <div id="cartArea"></div>

  <h3>الإجمالي: <span id="total">0</span> جنيه</h3>

  <button class="btn" onclick="orderNow()">اطلب عبر واتساب</button>
  <button class="btn" style="background:#b00" onclick="clearCart()">إفراغ السلة</button>

  <br><br>
  <a href="menu.html">⬅ الرجوع للمنيو</a>
</div>

<script>
const CART_KEY = "neoCafe_cart_v1";

// تحميل
function loadCart(){
  const raw = localStorage.getItem(CART_KEY);
  if(!raw) return [];
  try { return JSON.parse(raw); }
  catch { return []; }
}

// حفظ
function saveCart(cart){
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}

// عرض السلة
function render(){
  const cart = loadCart();
  const area = document.getElementById("cartArea");

  if(cart.length === 0){
    area.innerHTML = `<div class="empty">السلة فارغة — أضف منتجات</div>`;
    document.getElementById("total").textContent = 0;
    return;
  }

  let html = "";
  let total = 0;

  cart.forEach(item=>{
    const sub = item.price * item.qty;
    total += sub;

    html += `
      <div class="item">
        <div>
          <div class="name">${item.name}</div>
          <div>الكمية: ${item.qty}</div>
        </div>
        <div>${sub} جنيه</div>
      </div>
    `;
  });

  area.innerHTML = html;
  document.getElementById("total").textContent = total;
}

function clearCart(){
  localStorage.removeItem(CART_KEY);
  render();
}

function orderNow(){
  const cart = loadCart();
  if(cart.length === 0){
    alert("السلة فارغة");
    return;
  }

  let msg = "طلب جديد من نيو كافيه:\n";
  cart.forEach((item,i)=>{
    msg += `${i+1}- ${item.name} × ${item.qty} = ${item.price*item.qty} جنيه\n`;
  });

  const phone = "201000000000"; // عدّله لرقمك
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`);
}

render();
</script>
</body>
</html>
